# 电磁场驱动微型机器人的自动化操控研究

## A. 绪论

1. 施加旋转磁场驱动球形和螺旋形机器人比靠磁场梯度驱动的方式推进效率更高

<div>			<!--块级封装-->
    <center>	<!--将图片和文字居中-->
    <img src="C:\Users\33931\AppData\Roaming\Typora\typora-user-images\image-20210923092537479.png"
         alt="图片源文件丢失：image-20210923092537479.png"
         style="zoom:这里写图片的缩放百分比"/>
    <br>		<!--换行-->
    Figure 1.3 Three kinds of Propulsion mechanisms<!--标题-->
    </center>
</div>

## B. 基于天然植物纤维的磁驱微型机器人运动学特性研究

1. Purcell指出在低雷诺数环境下的运动都是线性的

## C. 自动化操控研究

<div>
    <center>
        <img src="C:\Users\33931\AppData\Roaming\Typora\typora-user-images\image-20210923173027238.png"
             alt="图片源文件丢失：image-20210923173027238.png"
         	 style="zoom:这里写图片的缩放百分比"/>
    <br>		<!--换行-->
    Figure 3.2 Helmholtz coil system<!--标题-->
    </center>
</div>

### 运动规划：

**`首先由地图生成器处理捕获的图像，标记自由空间和障碍物空间->之后由路径规划器探索无障碍空间，以便从全局范围内找到从起点到目标位置的可行路径->最后通过运动控制器安路径方向引导机器人运动`**

<div>
    <center>
        <img src = "C:\Users\33931\AppData\Roaming\Typora\typora-user-images\image-20210923173834938.png"
             alt=""图片源文件丢失：image-20210923173834938.png""
             style= "zoom:这里写图片的缩放百分比"
         />
        <br>
        Figure 3.3 Automated manioulation framework
</div>

#### 路径规划算法

1. 对于磁场驱动机器人有两种常见的方法：**基于离散化的规划算法（如A\*和D\*）**、**基于采样的规划算法**（RRT）。
   - 基于离散化的运动规划算法需要离散化全局地图才能找到搜素代价最小的路径，这种离散化的操作可能使得A\*和D\*不能在狭小的缝隙中找到最短的路径。
   - 而RRT和RRT\*能克服这样的缺点。

- **但是网络上的观点是RRT算法，不管什么机器人类型、不管自由度是多少、不管约束有多复杂都能用。而且它的原理很简单，这是它在机器人领域流行的主要原因之一。不过它的缺点也很明显，它得到的路径一般质量都不是很好，例如可能包含棱角，不够光滑，通常也远离最优路径，同时难以在有狭窄通道的环境找到路径。因为狭窄通道面积小，被碰到的概率低，找到路径需要的时间要看运气了。**

  *路径规划的问题等先把基础控制做完再说，现在知道路径规划是有用的*

#### 运动控制器

1. 与*路径跟随控制研究*那篇文章思路一样，将路径分段，完成每一小段的跟随任务，且由于机器人的重力和自身动力学模型的不确定性，内环使用PI控制器。

2. 与那篇文章不同的是外环不是通过调节参数 $M$ 来改变权重，而是将误差定义为
   $$
   E(k)=\frac{\delta^d_k}{\delta^d_k + \delta^{\theta}_k}\delta^d_k+\frac{\delta^{\theta}_k}{\delta^d_k + \delta^{\theta}_k}\delta^{\theta}_k
   $$

    <div>
        <center>
            <img src="C:\Users\33931\AppData\Roaming\Typora\typora-user-images\image-20210923200728914.png"
                 alt=""图片源文件丢失：image-20210923200728914.png""
                 style= "zoom:这里写图片的缩放百分比"
                 />
            <br>
            Figure 3.8 Control block diagram of path following
    </div>

3. 这篇文章的控制方案好像并不合理：

   - 1.  $e(t)$ 的两个分量分别是角度误差和距离误差，将角度误差和距离误差作为标量进行求和得到的 $E(k)$ 没有意义（这个从机器人重心到规定路径投影点的距离误差也没有意义，正常情况下应该调整运动的俯仰角，但是如果这个是俯仰角的误差，这两个角度误差也同样是两个方向的，虽然可能耦合起来会存在干扰，但是也仍然没有意义，下面两个问题也相同）。
     2. 如果是作为向量进行相加，PI控制器是单输入单输出，无法控制矢量。
     3.  如果是使用两个PI控制器，那就无需计算权重，直接角度控制角度，距离控制速度即可。

   - 被控对象应该分为三个部分：1、磁场旋转中心轴的俯仰角；2、磁场旋转中心偏航角；**由于轨迹已知，所以磁场的角度可以对应到轨迹方向的垂直和平行方向上**3、磁通量或者频率（用来控制前进速度：需要找准路径方向之后沿着路径走）

4. 综合两篇文章进行修改，我认为比较合理的控制方案如下：

   1. 分别计算当前位置与路径上的投影点误差，该误差包含两部分：1、垂直于轨迹方向的距离误差；2、平行于轨迹方向的距离误差。

   2. 定义期望运动方向：与*路径跟随控制研究* 相同，采用距离加调参来控制权重来调节运动方向（这里必须用参数来手动调节（或者可以和路径有关，比如路径要发生改变就增加 $M$ ），因为沿着路径并没有误差这种可以用来控制的量）。
      $$
      	n^*=\frac{||d||}{||d||+M}d_⊥+\frac{M}{||d||+M}d_∥
      $$
       ( $d_⊥$ 和 $d_∥$ 分别是垂直和平行于路径的单位向量）

   3. 将期望运动方向变换成俯仰角和偏航角 $\theta_{pitch}$ 和 $\theta_{yaw}$。	

   4. 计算通过摄像头得到的机器人当前运动方向 $n$， 并将 $n$ 变换成角度 $\theta_{pitch}'$ 和 $\theta_{yaw}'$

   5. 分别计算误差 $e_{pitch} = \theta_{pitch} - \theta_{pitch}'$ 和 $e_{yaw} = \theta_{yaw} - \theta_{yaw}'$ 。

   6. 分别使用两个误差进行俯仰和偏航的两个PI，再分别进行映射到磁场中。

      <div>
           <center>
               <img src="C:\Users\33931\AppData\Roaming\Typora\typora-user-images\image-20210923222813045.png"
                    alt=""图片源文件丢失：image-20210923222813045.png""
                    style= "zoom:这里写图片的缩放百分比"
                    />
               <br>
               Control block diagram of path following
       </div>

5. 文章只固定了俯仰角进行了二维空间上的路径跟随控制。